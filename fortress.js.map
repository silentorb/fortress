{"version":3,"file":"fortress.js","sourceRoot":"","sources":["lib/references.ts","lib/Fortress.ts","lib/export.ts"],"names":["Fortress","Fortress.constructor","Fortress.add_gate","Fortress.get_roles","","Fortress.user_has_role","Fortress.user_has_any_role","Fortress.grow","Fortress.select_gates","","Fortress.atomic_access","","","","Fortress.query_access","","Fortress.update_access","","","","Fortress.sequential_check","Fortress.sequential_check.iteration","Fortress","Fortress.Gate","Fortress.Gate.constructor","Fortress.Gate.check","Fortress.Admin","Fortress.Admin.constructor","Fortress.Admin.check","Fortress.User_Content","Fortress.User_Content.constructor","Fortress.User_Content.check_rows_ownership","Fortress.User_Content.is_open_query","","Fortress.User_Content.check","","","Fortress.User_Content.limited_to_user","","Fortress.Link","Fortress.Link.constructor","Fortress.Link.check_path","Fortress.Link.check","","","",""],"mappings":"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"}